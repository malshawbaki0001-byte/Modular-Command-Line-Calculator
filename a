1   | # --- (1. Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠØ©) ---
2   | import sys  # Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù†Ø¸Ø§Ù…: Ù†Ø­ØªØ§Ø¬Ù‡Ø§ Ù„Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø¨Ø¯Ø¡ ÙˆØ¥ØºÙ„Ø§Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
3   | import random  # Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©: Ù†Ø­ØªØ§Ø¬Ù‡Ø§ Ù„ØªÙˆÙ„ÙŠØ¯ Ø£Ø±Ù‚Ø§Ù… Ù…Ø¹Ø±ÙØ§Øª Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ±
4   | import re  # Ù…ÙƒØªØ¨Ø© Ø§Ù„ØªØ¹Ø§Ø¨ÙŠØ± Ø§Ù„Ù†Ù…Ø·ÙŠØ© (Regex): Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµÙŠØºØ© Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„
5   | import PyQt6  # Ù…ÙƒØªØ¨Ø© Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø±Ø³ÙˆÙ…ÙŠØ©
6   | import Latest  # Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù„ÙÙ†Ø§ Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¯ÙˆØ§Ù„ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª SQLite
7   | from Latest import (  # Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¯ÙˆØ§Ù„ Ù…Ø­Ø¯Ø¯Ø© Ù…Ù† Ù…Ù„Ù Latest.py Ù„Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
8   |     get_connection,
9   |     add_student,
10  |     get_transcript,
11  |     fetch_courses_with_sections,
12  |     upsert_course,
13  |     delete_course,
14  |     upsert_section,
15  |     delete_section,
16  |     list_students,
17  |     delete_student_record,
18  |     list_professors,
19  |     delete_professor_account,
20  |     increment_section_enrollment,
21  |     decrement_section_enrollment,
22  |     get_courses_by_instructor,
23  | )
24  | # Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø£Ø¯ÙˆØ§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù…Ù† PyQt6 (Ø§Ù„Ø£Ø²Ø±Ø§Ø±ØŒ Ø§Ù„Ù†ØµÙˆØµØŒ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ØŒ Ø§Ù„Ù†ÙˆØ§ÙØ°...)
25  | from PyQt6.QtWidgets import (
26  |     QApplication, QWidget, QHBoxLayout, QVBoxLayout,
27  |     QPushButton, QListWidget, QListWidgetItem, QLabel, QFrame,
28  |     QMessageBox, QDialog, QLineEdit, QFormLayout,
29  |     QTableWidget, QTableWidgetItem, QHeaderView,
30  |     QComboBox, QInputDialog, QTabWidget,
31  |     QGraphicsDropShadowEffect,
32  |     QStatusBar,
33  |     QRadioButton, QButtonGroup  # Ø£Ø¯ÙˆØ§Øª Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± (Ø§Ù„Ø¯ÙˆØ§Ø¦Ø±)
34  | )
35  | from PyQt6.QtCore import Qt, pyqtSlot, QRegularExpression  # Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù…Ø­Ø§Ø°Ø§Ø© ÙˆØ§Ù„Ø¥Ø´Ø§Ø±Ø§Øª
36  | from PyQt6.QtGui import QFont, QColor, QRegularExpressionValidator  # Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø®Ø·ÙˆØ· ÙˆØ§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„ØªØ­Ù‚Ù‚
37  | 
38  | # --- (2. ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© - CSS) ---
39  | 
40  | # ØªØ¹Ø±ÙŠÙ Ù…ØªØºÙŠØ± Ù†ØµÙŠ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ ÙƒÙˆØ¯ CSS Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­ (Light Mode)
41  | LIGHT_MODE_QSS = """
42  | QDialog, QWidget { background-color: #f0f2f5; font-family: "Arial", sans-serif; color: #333; } /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ù†ÙˆØ§ÙØ° */
43  | QFrame[class="card"], QWidget[class="card"] { background-color: #ffffff; border-radius: 10px; } /* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ */
44  | QLabel { font-size: 14px; font-weight: bold; color: #333; } /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù†ØµÙˆØµ */
45  | /* ... (ØªÙ†Ø³ÙŠÙ‚ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ÙˆØ§Ù„Ø£Ø²Ø±Ø§Ø±) ... */
46  | QLineEdit, QComboBox {
47  |     font-size: 14px; padding: 10px 15px; border: 1px solid #d0d0d0;
48  |     border-radius: 5px; background-color: #fafafa; color: black;
49  | }
50  | /* ØªØµÙ…ÙŠÙ… Ø²Ø± Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ (Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©) Ù„ÙŠÙƒÙˆÙ† Ø´ÙƒÙ„Ù‡ Ø­Ø¯ÙŠØ«Ø§Ù‹ */
51  | QRadioButton::indicator {
52  |     width: 16px; height: 16px; border-radius: 9px; border: 2px solid #999; background-color: #f0f0f0;
53  | }
54  | QRadioButton::indicator:checked {
55  |     border: 2px solid #007bff; /* Ø­Ø¯ÙˆØ¯ Ø²Ø±Ù‚Ø§Ø¡ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± */
56  |     background-color: qradialgradient(cx:0.5, cy:0.5, radius: 0.5, fx:0.5, fy:0.5, stop:0.4 #007bff, stop:0.5 #f0f0f0); /* Ù†Ù‚Ø·Ø© Ø²Ø±Ù‚Ø§Ø¡ ÙÙŠ Ø§Ù„ÙˆØ³Ø· */
57  | }
58  | """
59  | 
60  | # ØªØ¹Ø±ÙŠÙ Ù…ØªØºÙŠØ± Ù†ØµÙŠ Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† (Dark Mode)
61  | DARK_MODE_QSS = """
62  | QDialog, QWidget { background-color: #2b2b2b; font-family: "Arial", sans-serif; color: #f0f0f0; } /* Ø®Ù„ÙÙŠØ© ØºØ§Ù…Ù‚Ø© */
63  | QFrame[class="card"], QWidget[class="card"] { background-color: #3c3c3c; border-radius: 10px; } /* Ø¨Ø·Ø§Ù‚Ø§Øª Ø±Ù…Ø§Ø¯ÙŠØ© */
64  | /* ... (Ø¨Ø§Ù‚ÙŠ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ù„Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„ØºØ§Ù…Ù‚Ø©) ... */
65  | QRadioButton::indicator:checked {
66  |     border: 2px solid #007bff;
67  |     background-color: qradialgradient(cx:0.5, cy:0.5, radius: 0.5, fx:0.5, fy:0.5, stop:0.4 #007bff, stop:0.5 #444);
68  | }
69  | """
70  | 
71  | # --- (3. Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆØ§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø¤Ù‚ØªØ©) ---
72  | 
73  | USER_DB = {}  # Ù‚Ø§Ù…ÙˆØ³ (Dictionary) ÙŠØ¹Ù…Ù„ ÙƒØ°Ø§ÙƒØ±Ø© Ù…Ø¤Ù‚ØªØ© (Cache) Ù„Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† Ø¯Ø®ÙˆÙ„Ù‡Ù…
74  | 
75  | STAFF_REGISTRATION_CODE = "123"  # Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¯ÙƒØªÙˆØ± Ø¬Ø¯ÙŠØ¯
76  | BOOTSTRAP_ADMIN = {  # Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
77  |     "student_id": "admin",
78  |     "email": "admin@odus.local",
79  |     "password": "admin",
80  |     "display_name": "Super Admin",
81  | }
82  | 
83  | def prompt_staff_code(parent, title, prompt_text):
84  |     """Ø¯Ø§Ù„Ø© ØªØ¸Ù‡Ø± Ù†Ø§ÙØ°Ø© ØªØ·Ù„Ø¨ Ø±Ù…Ø² Ø³Ø±ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø©"""
85  |     code, ok = QInputDialog.getText(parent, title, prompt_text, QLineEdit.EchoMode.Password)
86  |     if not ok: return False  # Ø¥Ø°Ø§ Ø¶ØºØ· Ø¥Ù„ØºØ§Ø¡
87  |     if code.strip() != STAFF_REGISTRATION_CODE:  # Ø¥Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ø®Ø·Ø£
88  |         QMessageBox.critical(parent, 'Ø±Ù…Ø² ØºÙŠØ± ØµØ­ÙŠØ­', 'Ø±Ù…Ø² Ø§Ù„ØªØ³Ø¬ÙŠÙ„ ØºÙŠØ± ØµØ­ÙŠØ­.')
89  |         return False
90  |     return True
91  | 
92  | def ensure_bootstrap_admin():
93  |     """Ø¯Ø§Ù„Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹"""
94  |     create_user_account(
95  |         BOOTSTRAP_ADMIN["student_id"], BOOTSTRAP_ADMIN["email"],
96  |         BOOTSTRAP_ADMIN["password"], "admin", BOOTSTRAP_ADMIN["display_name"],
97  |     )
98  | 
99  | COURSE_CACHE = {}  # Ù…Ø®Ø²Ù† Ù…Ø¤Ù‚Øª Ù„Ù„Ù…ÙˆØ§Ø¯ ÙˆØ§Ù„Ø´Ø¹Ø¨ Ù„ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ Ø¹Ù„Ù‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
100 | 
101 | def refresh_course_cache():
102 |     """Ø¯Ø§Ù„Ø© ØªØ³Ø­Ø¨ Ø£Ø­Ø¯Ø« Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø¯ ÙˆØ§Ù„Ø´Ø¹Ø¨ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªØ¶Ø¹Ù‡Ø§ ÙÙŠ Ø§Ù„ÙƒØ§Ø´"""
103 |     global COURSE_CACHE
104 |     COURSE_CACHE = fetch_courses_with_sections() # Ø¯Ø§Ù„Ø© Ù…Ù† Ù…Ù„Ù Latest.py
105 | 
106 | refresh_course_cache()  # Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø£ÙˆÙ„ÙŠ Ù„ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
107 | 
108 | # ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„ÙƒÙ„ ØªØ®ØµØµ ÙˆÙ…Ø³ØªÙˆÙ‰ (Ø¨ÙŠØ§Ù†Ø§Øª Ø«Ø§Ø¨ØªØ©)
109 | PROGRAM_PLANS = {
110 |     'Computer': {'Level 1': ['CS101', 'MATH201', 'ENGR101'], 'Level 2': ['CIRC210', 'MATH301']},
111 |     'Communications': {'Level 1': ['CS101', 'MATH201', 'ENGR101'], 'Level 2': ['CIRC210', 'COMM310']},
112 |     'Power': {'Level 1': ['CS101', 'MATH201', 'ENGR101'], 'Level 2': ['CIRC210', 'MATH301']},
113 |     'Biomedical': {'Level 1': ['CS101', 'MATH201'], 'Level 2': ['CIRC210', 'MATH301']}
114 | }
115 | 
116 | PROGRAM_DISPLAY_MAP = {'Comm': 'Communications', 'Communications': 'Communications'} # Ù„ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
117 | 
118 | def get_display_program(program_code):
119 |     """ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø®ØªØµØ± Ù„Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø¥Ù„Ù‰ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„"""
120 |     return PROGRAM_DISPLAY_MAP.get(program_code, program_code)
121 | 
122 | CREDIT_LIMITS = {'min': 12, 'max': 18} # Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø© Ù„Ù„ØªØ³Ø¬ÙŠÙ„
123 | 
124 | # --- (4. Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª SQLite) ---
125 | 
126 | def create_user_account(student_id, email, password, role, display_name=None, mobile=None):
127 |     """Ø¥Ù†Ø´Ø§Ø¡ Ø£Ùˆ ØªØ­Ø¯ÙŠØ« Ø­Ø³Ø§Ø¨ Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø¬Ø¯ÙˆÙ„ users"""
128 |     conn = get_connection() # ÙØªØ­ Ø§ØªØµØ§Ù„
129 |     cur = conn.cursor()
130 |     # Ø§Ù„ØªØ­Ù‚Ù‚ Ù‡Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙˆØ¬ÙˆØ¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹ØŸ
131 |     cur.execute("SELECT user_id FROM users WHERE (student_id = ? AND student_id IS NOT NULL) OR (email = ? AND email IS NOT NULL)", (student_id, email),)
132 |     row = cur.fetchone()
133 |     if row: # Ø¥Ø°Ø§ Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù‚Ù… Ø¨Ø§Ù„ØªØ­Ø¯ÙŠØ« (Update)
134 |         cur.execute("UPDATE users SET student_id = ?, email = ?, password_hash = ?, role = ?, display_name = ?, mobile = ? WHERE user_id = ?", (student_id, email, password, role, display_name, mobile, row[0]),)
135 |     else: # Ø¥Ø°Ø§ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù‚Ù… Ø¨Ø§Ù„Ø¥Ø¶Ø§ÙØ© (Insert)
136 |         cur.execute("INSERT INTO users (student_id, email, password_hash, role, display_name, mobile) VALUES (?, ?, ?, ?, ?, ?)", (student_id, email, password, role, display_name, mobile),)
137 |     conn.commit() # Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª
138 |     conn.close() # Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø§ØªØµØ§Ù„
139 | 
140 | def user_identifier_exists(student_id):
141 |     """Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø³Ø±ÙŠØ¹ Ù‡Ù„ Ø§Ù„Ù…Ø¹Ø±Ù Ù…Ø³ØªØ®Ø¯Ù… Ø£Ù… Ù„Ø§"""
142 |     conn = get_connection()
143 |     cur = conn.cursor()
144 |     cur.execute("SELECT 1 FROM users WHERE student_id = ?", (student_id,))
145 |     exists = cur.fetchone() is not None
146 |     conn.close()
147 |     return exists
148 | 
149 | def generate_unique_identifier(prefix):
150 |     """ØªÙˆÙ„ÙŠØ¯ Ù…Ø¹Ø±Ù ÙØ±ÙŠØ¯ Ø¹Ø´ÙˆØ§Ø¦ÙŠ (Ù…Ø«Ù„ dr_1234) ØºÙŠØ± Ù…ÙƒØ±Ø±"""
151 |     while True:
152 |         candidate = f"{prefix}{random.randint(1000, 9999)}"
153 |         if candidate in USER_DB: continue # Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„ÙƒØ§Ø´ØŸ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
154 |         if not user_identifier_exists(candidate): # Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ
155 |             return candidate # Ø¥Ø°Ø§ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ØŒ Ù‡Ø°Ø§ Ù…Ø¹Ø±Ù ØµØ§Ù„Ø­
156 | 
157 | def generate_password():
158 |     """ØªÙˆÙ„ÙŠØ¯ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù‚ÙˆÙŠØ©"""
159 |     digits = ''.join(str(random.randint(0, 9)) for _ in range(7))
160 |     return f"Ar@{digits}"
161 | 
162 | ensure_bootstrap_admin() # Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ø£Ø¯Ù…Ù† Ø§Ù„Ø¢Ù†
163 | 
164 | def db_login(academic_id, password):
165 |     """Ù…Ø­Ø§ÙˆÙ„Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"""
166 |     conn = get_connection()
167 |     cur = conn.cursor()
168 |     # Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ù…Ø±ØªØ¨Ø· Ø¨Ù‡ (JOIN)
169 |     cur.execute("""
170 |         SELECT u.role, u.password_hash, COALESCE(s.name, u.display_name),
171 |                COALESCE(s.email, u.email), s.program, s.level
172 |         FROM users u LEFT JOIN students s ON u.student_id = s.student_id
173 |         WHERE u.student_id = ? """, (academic_id,))
174 |     row = cur.fetchone()
175 |     conn.close()
176 |     
177 |     if not row: return None # Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯
178 |     role, stored_password, name, email, program, level = row
179 |     if stored_password != password: return None # ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø·Ø£
180 |     
181 |     # Ø¥Ø±Ø¬Ø§Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙƒÙ‚Ø§Ù…ÙˆØ³
182 |     return {"id": academic_id, "role": role, "name": name or "", "email": email or "", "program": program, "level": level}
183 | 
184 | # --- (5. Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© Ø¹Ø§Ù…Ø©) ---
185 | 
186 | def apply_shadow(widget):
187 |     """Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø¸Ù„ Ø¬Ù…Ø§Ù„ÙŠ Ù„Ù„Ø¹Ù†ØµØ± (Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©)"""
188 |     shadow = QGraphicsDropShadowEffect()
189 |     shadow.setBlurRadius(25)
190 |     shadow.setColor(QColor(0, 0, 0, 80))
191 |     shadow.setOffset(0, 5)
192 |     widget.setGraphicsEffect(shadow)
193 |     
194 | def get_section_data(section_id_to_find):
195 |     """Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ØªÙØ§ØµÙŠÙ„ Ø´Ø¹Ø¨Ø© Ù…Ø¹ÙŠÙ†Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒØ§Ø´ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ID"""
196 |     for course_code, course_info in COURSE_CACHE.items():
197 |         for section in course_info['sections']:
198 |             if section['id'] == section_id_to_find:
199 |                 # Ù†Ø³Ø® Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ø¯Ø© Ù„Ù‡Ø§
200 |                 section_data = section.copy()
201 |                 section_data['course_name'] = course_info['name']
202 |                 section_data['course_code'] = course_code
203 |                 section_data['credit_hours'] = course_info['credit_hours']
204 |                 section_data['prerequisites'] = course_info['prerequisites']
205 |                 return section_data
206 |     return None
207 | 
208 | def calculate_passed_hours(transcript_list):
209 |     """Ø­Ø³Ø§Ø¨ Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ù„Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªÙŠ Ø§Ø¬ØªØ§Ø²Ù‡Ø§ Ø§Ù„Ø·Ø§Ù„Ø¨"""
210 |     total_hours = 0
211 |     for course_code in transcript_list:
212 |         if course_code in COURSE_CACHE:
213 |             total_hours += COURSE_CACHE[course_code]['credit_hours']
214 |     return total_hours
215 | 
216 | def extract_course_number(course_code):
217 |     """Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø±Ù‚Ù… Ù…Ù† Ø±Ù…Ø² Ø§Ù„Ù…Ø§Ø¯Ø© (CS101 -> 101)"""
218 |     match = re.search(r'\d+', course_code)
219 |     if match: return int(match.group())
220 |     return None
221 | 
222 | def is_course_allowed_for_level(course_code, student_level):
223 |     """Ø§Ù„ØªØ­Ù‚Ù‚ Ù‡Ù„ Ø§Ù„Ù…Ø§Ø¯Ø© Ù…Ø³Ù…ÙˆØ­Ø© Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø·Ø§Ù„Ø¨ (1 Ø£Ùˆ 2)"""
224 |     course_number = extract_course_number(course_code)
225 |     if course_number is None: return False
226 |     
227 |     if student_level == 'Level 1':
228 |         return course_number == 110 # Ù…Ø«Ø§Ù„: Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„ ÙÙ‚Ø· Ù…ÙˆØ§Ø¯ 110
229 |     elif student_level == 'Level 2':
230 |         return 100 <= course_number <= 299 # Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù†ÙŠ Ù…Ù† 100 Ø¥Ù„Ù‰ 299
231 |     else:
232 |         return False
233 | 
234 | # --- (6. ÙØ¦Ø§Øª Ø§Ù„ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ø±Ø³ÙˆÙ…ÙŠØ© - Classes) ---
235 | 
236 | # --- Ù†Ø§ÙØ°Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ ---
237 | class RegisterWindow(QDialog):
238 |     def __init__(self, role='student', parent=None):
239 |         super().__init__(parent)
240 |         self.role = role # ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø¯ÙˆØ± (Ø·Ø§Ù„Ø¨ØŒ Ø¯ÙƒØªÙˆØ±...)
241 |         self.setWindowTitle(f'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ {self.role} Ø¬Ø¯ÙŠØ¯')
242 |         self.setLayoutDirection(Qt.LayoutDirection.RightToLeft) # Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¹Ø±Ø¨ÙŠ
243 |         # ... (Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø­Ø¬Ù… ÙˆØ§Ù„ØªØ®Ø·ÙŠØ·) ...
244 |         self.setGeometry(0, 0, 600, 500)
245 | 
246 |         # Ø¥Ù†Ø´Ø§Ø¡ Ø¨Ø·Ø§Ù‚Ø© Ø¨ÙŠØ¶Ø§Ø¡ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø§ÙØ°Ø©
247 |         card_widget = QWidget()
248 |         card_widget.setProperty("class", "card") # Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù€ CSS
249 |         apply_shadow(card_widget) # Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¸Ù„
250 |         
251 |         # ØªØ®Ø·ÙŠØ· Ø¹Ù…ÙˆØ¯ÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
252 |         card_layout = QVBoxLayout(card_widget)
253 |         
254 |         # Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
255 |         title = QLabel(f'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ {self.role} Ø¬Ø¯ÙŠØ¯')
256 |         title.setObjectName("TitleLabel")
257 |         card_layout.addWidget(title)
258 |         
259 |         # Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Form Layout)
260 |         form_layout = QFormLayout()
261 |         self.name_input = QLineEdit()
262 |         self.email_input = QLineEdit()
263 |         self.mobile_input = QLineEdit()
264 |         
265 |         # Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 05 ÙˆÙŠÙƒÙˆÙ† 10 Ø£Ø±Ù‚Ø§Ù…)
266 |         mobile_validator = QRegularExpressionValidator(QRegularExpression("^05[0-9]{8}$"))
267 |         self.mobile_input.setValidator(mobile_validator)
268 |         self.mobile_input.setPlaceholderText("05XXXXXXXX")
269 |         
270 |         # Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù„Ù„Ù†Ù…ÙˆØ°Ø¬
271 |         form_layout.addRow('Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:', self.name_input)
272 |         form_layout.addRow('Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:', self.email_input)
273 |         form_layout.addRow('Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„:', self.mobile_input)
274 |         
275 |         # Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù„Ø·Ø§Ù„Ø¨ØŒ Ø£Ø¶Ù Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªØ®ØµØµ ÙˆØ§Ù„Ù…Ø³ØªÙˆÙ‰
276 |         if self.role == 'student':
277 |             self.program_combo = QComboBox()
278 |             self.program_combo.addItems(PROGRAM_PLANS.keys())
279 |             form_layout.addRow('Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬:', self.program_combo)
280 |             
281 |             self.level_combo = QComboBox()
282 |             self.level_combo.addItems(['Level 1', 'Level 2']) 
283 |             form_layout.addRow('Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø­Ø§Ù„ÙŠ:', self.level_combo)
284 |         
285 |         card_layout.addLayout(form_layout)
286 |         
287 |         # Ø²Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„
288 |         self.register_button = QPushButton('Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨')
289 |         self.register_button.clicked.connect(self.create_account) # Ø±Ø¨Ø· Ø§Ù„Ø²Ø± Ø¨Ø¯Ø§Ù„Ø© Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡
290 |         card_layout.addWidget(self.register_button)
291 | 
292 |         # Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ù†Ø§ÙØ°Ø©
293 |         main_layout = QHBoxLayout(self)
294 |         main_layout.addStretch()
295 |         main_layout.addWidget(card_widget)
296 |         main_layout.addStretch()
297 | 
298 |     def create_account(self):
299 |         """Ù…Ù†Ø·Ù‚ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±"""
300 |         name = self.name_input.text()
301 |         email = self.email_input.text()
302 |         mobile = self.mobile_input.text().strip()
303 |         
304 |         # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù„ÙŠØ³Øª ÙØ§Ø±ØºØ©
305 |         if not name or not email or not mobile:
306 |             QMessageBox.warning(self, 'Ø®Ø·Ø£', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„')
307 |             return
308 |         
309 |         # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¬ÙˆØ§Ù„ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù„Ù„ØªØ£ÙƒÙŠØ¯
310 |         if not mobile.startswith('05') or len(mobile) != 10 or not mobile.isdigit():
311 |             QMessageBox.warning(self, 'Ø®Ø·Ø£', 'Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø¨Ù€ 05 ÙˆÙŠØªÙƒÙˆÙ† Ù…Ù† 10 Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·')
312 |             return
313 |             
314 |         new_password = generate_password() # ØªÙˆÙ„ÙŠØ¯ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ±
315 | 
316 |         if self.role == 'student':
317 |             # ØªØ¬Ù‡ÙŠØ² Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨
318 |             program = self.program_combo.currentText()
319 |             program_for_db = 'Comm' if program == 'Communications' else program
320 |             level_label = self.level_combo.currentText()
321 |             
322 |             # Ù…Ø­Ø§ÙƒØ§Ø© Ù…ÙˆØ§Ø¯ Ù…Ø¬ØªØ§Ø²Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 2
323 |             mock_transcript = PROGRAM_PLANS[program]['Level 1'] if level_label == 'Level 2' else []
324 |             
325 |             # ØªÙˆÙ„ÙŠØ¯ Ø±Ù‚Ù… Ø¬Ø§Ù…Ø¹ÙŠ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
326 |             while True:
327 |                 new_academic_id = str(random.randint(100000, 999999))
328 |                 if new_academic_id in USER_DB: continue
329 |                 if not user_identifier_exists(new_academic_id): break
330 |             
331 |             # Ø­ÙØ¸ Ø§Ù„Ø·Ø§Ù„Ø¨ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ø¬Ø¯ÙˆÙ„ Students)
332 |             level_int = int(level_label.split()[-1]) # ØªØ­ÙˆÙŠÙ„ "Level 1" Ø¥Ù„Ù‰ 1
333 |             db_message = add_student(new_academic_id, name, email, program_for_db, level_int)
334 |             
335 |             # Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©
336 |             if not db_message.startswith("âœ…"):
337 |                 QMessageBox.critical(self, 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„', db_message)
338 |                 return
339 |                 
340 |             # Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¯Ø®ÙˆÙ„ (Ø¬Ø¯ÙˆÙ„ Users)
341 |             create_user_account(new_academic_id, email, new_password, "student", name, mobile)
342 |             
343 |             # ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒØ§Ø´
344 |             USER_DB[new_academic_id] = {
345 |                 'password': new_password, 'name': name, 'email': email,
346 |                 'mobile': mobile, 'role': 'student', 'program': program, 
347 |                 'level': level_label, 'transcript': mock_transcript, 'schedule': [] 
348 |             }
349 |             # Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­
350 |             msg = (f"Ø§Ù„Ù…Ø¹Ø±Ù Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ: {new_academic_id}\nÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: {new_password}\n{db_message}")
351 |             
352 |         elif self.role == 'doctor':
353 |             # Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¯ÙƒØªÙˆØ±
354 |             new_academic_id = generate_unique_identifier("dr_")
355 |             create_user_account(new_academic_id, email, new_password, "doctor", name, mobile)
356 |             USER_DB[new_academic_id] = {'password': new_password, 'name': name, 'email': email, 'mobile': mobile, 'role': 'doctor'}
357 |             msg = (f"Ù…Ø¹Ø±Ù Ø§Ù„Ø¯ÙƒØªÙˆØ±: {new_academic_id}\nÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: {new_password}")
358 |         else:
359 |             # Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¥Ø¯Ø§Ø±ÙŠ
360 |             new_academic_id = generate_unique_identifier("adm_")
361 |             create_user_account(new_academic_id, email, new_password, "admin", name, mobile)
362 |             USER_DB[new_academic_id] = {'password': new_password, 'name': name, 'email': email, 'mobile': mobile, 'role': 'admin'}
363 |             msg = (f"Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø¯ÙŠØ±: {new_academic_id}\nÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: {new_password}")
364 |             
365 |         QMessageBox.information(self, 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­', msg)
366 |         self.accept() # Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¨Ù†Ø¬Ø§Ø­
367 | 
368 | # --- Ù†Ø§ÙØ°Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ---
369 | class LoginWindow(QDialog):
370 |     def __init__(self, parent=None):
371 |         super().__init__(parent)
372 |         self.setWindowTitle('ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - Ù†Ø¸Ø§Ù… ODUS')
373 |         # ... (Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ§Ù„ØªØ®Ø·ÙŠØ·) ...
374 |         self.is_dark_mode = False 
375 | 
376 |         # Ø²Ø± ØªØºÙŠÙŠØ± Ø§Ù„Ø«ÙŠÙ… (Ù„ÙŠÙ„ÙŠ/Ù†Ù‡Ø§Ø±ÙŠ)
377 |         self.theme_button = QPushButton("ğŸŒ™")
378 |         self.theme_button.setProperty("class", "theme_button")
379 |         self.theme_button.clicked.connect(self.toggle_theme)
380 | 
381 |         # Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
382 |         self.id_input = QLineEdit()
383 |         self.id_input.setPlaceholderText('Ø§Ù„Ù…Ø¹Ø±Ù (Ù…Ø«Ø§Ù„: 123456)')
384 |         self.pass_input = QLineEdit()
385 |         self.pass_input.setEchoMode(QLineEdit.EchoMode.Password) # Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
386 |         
387 |         # Ø§Ù„Ø£Ø²Ø±Ø§Ø±
388 |         self.login_button = QPushButton('ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„')
389 |         self.register_student_button = QPushButton('Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯')
390 |         
391 |         # Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø¨Ø§Ù„Ø¯ÙˆØ§Ù„
392 |         self.login_button.clicked.connect(self.handle_login)
393 |         self.register_student_button.clicked.connect(self.handle_register_student)
394 |         # ... (ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ØµØ± ÙÙŠ Ø§Ù„ØªØ®Ø·ÙŠØ·) ...
395 | 
396 |     def toggle_theme(self):
397 |         """ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† ÙˆØ§Ù„ÙØ§ØªØ­"""
398 |         app = QApplication.instance()
399 |         self.is_dark_mode = not self.is_dark_mode
400 |         if self.is_dark_mode:
401 |             app.setStyleSheet(DARK_MODE_QSS) # ØªØ·Ø¨ÙŠÙ‚ Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø¸Ù„Ø§Ù…
402 |             self.theme_button.setText("â˜€ï¸")
403 |         else:
404 |             app.setStyleSheet(LIGHT_MODE_QSS) # ØªØ·Ø¨ÙŠÙ‚ Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ù†ÙˆØ±
405 |             self.theme_button.setText("ğŸŒ™")
406 | 
407 |     def handle_login(self):
408 |         """Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„"""
409 |         academic_id = self.id_input.text().strip()
410 |         password = self.pass_input.text()
411 |         
412 |         # Ø§Ù„ØªØ­Ù‚Ù‚ Ø¹Ø¨Ø± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
413 |         db_user = db_login(academic_id, password)
414 |         if db_user is not None:
415 |             user_role = db_user["role"] or "student"
416 |             # ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒØ§Ø´ Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
417 |             USER_DB[academic_id] = {
418 |                 'password': password, 'name': db_user.get('name', ''),
419 |                 'role': user_role, 'program': db_user.get('program', ''),
420 |                 'level': str(db_user.get('level', '')),
421 |                 'transcript': [], 'schedule': []
422 |             }
423 |             # Ø­ÙØ¸ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØ¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø©
424 |             self.current_user_id = academic_id
425 |             self.current_user_role = user_role
426 |             self.accept()
427 |             return
428 |         
429 |         QMessageBox.warning(self, 'Ø®Ø·Ø£', 'Ø§Ù„Ù…Ø¹Ø±Ù Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©')
430 |             
431 |     def handle_register_student(self):
432 |         """ÙØªØ­ Ù†Ø§ÙØ°Ø© ØªØ³Ø¬ÙŠÙ„ Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯"""
433 |         register_dialog = RegisterWindow(role='student', parent=self)
434 |         register_dialog.exec()
435 | 
436 | # --- Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ù„Ø·Ø§Ù„Ø¨ ---
437 | class RegistrationApp(QWidget):
438 |     def __init__(self, user_id):
439 |         super().__init__()
440 |         self.user_id = user_id 
441 |         self.section_button_group = QButtonGroup() # Ù…Ø¬Ù…ÙˆØ¹Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ø®ØªÙŠØ§Ø± Ø²Ø± Ø±Ø§Ø¯ÙŠÙˆ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø·
442 |         self.init_ui() # Ø¨Ù†Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
443 |         self.load_schedule_and_courses() # ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
444 | 
445 |     def init_ui(self):
446 |         # ... (ØªØ¬Ù‡ÙŠØ² Ø§Ù„ØªØ®Ø·ÙŠØ·Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©) ...
447 |         
448 |         # 1. Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙŠÙ…Ù†Ù‰: Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ù…ØªØ§Ø­Ø©
449 |         self.available_courses_list = QListWidget()
450 |         self.available_courses_list.currentItemChanged.connect(self.display_sections) # Ø¹Ù†Ø¯ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ø§Ø¹Ø±Ø¶ Ø´Ø¹Ø¨Ù‡Ø§
451 | 
452 |         # 2. Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆØ³Ø·Ù‰: Ø§Ù„Ø´Ø¹Ø¨ (Ø¬Ø¯ÙˆÙ„)
453 |         self.available_sections_table = QTableWidget()
454 |         self.available_sections_table.setColumnCount(7)
455 |         # Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙˆØ¯ 'Ø§Ø®ØªÙŠØ§Ø±' Ù„ÙˆØ¶Ø¹ Ø²Ø± Ø§Ù„Ø±Ø§Ø¯ÙŠÙˆ
456 |         self.available_sections_table.setHorizontalHeaderLabels(['Ø§Ø®ØªÙŠØ§Ø±', 'Ø§Ù„Ù…Ø¯Ø±Ø³', 'Ø§Ù„ÙˆÙ‚Øª', 'Ø§Ù„Ù‚Ø§Ø¹Ø©', 'Ø§Ù„Ø³Ø¹Ø©', 'Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†', 'ID'])
457 |         
458 |         self.add_button = QPushButton('Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ø¹Ø¨Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø© <--')
459 |         self.add_button.clicked.connect(self.add_section) # Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ©
460 | 
461 |         # 3. Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙŠØ³Ø±Ù‰: Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¬Ù„
462 |         self.registered_schedule_table = QTableWidget()
463 |         self.remove_button = QPushButton('--> Ø­Ø°Ù Ø§Ù„Ø´Ø¹Ø¨Ø© Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©')
464 |         self.remove_button.clicked.connect(self.remove_section) # Ø²Ø± Ø§Ù„Ø­Ø°Ù
465 | 
466 |         # Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
467 |         self.status_bar = QStatusBar()
468 |         
469 |         # ... (Ø¥Ø¶Ø§ÙØ© ÙƒÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ù„Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ) ...
470 | 
471 |     @pyqtSlot(QListWidgetItem)
472 |     def display_sections(self, current_item):
473 |         """Ø¹Ø±Ø¶ Ø§Ù„Ø´Ø¹Ø¨ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø£ÙˆØ³Ø·"""
474 |         self.section_button_group = QButtonGroup() # Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
475 |         
476 |         # Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©
477 |         course_id = current_item.data(Qt.ItemDataRole.UserRole)
478 |         course_info = COURSE_CACHE.get(course_id)
479 |         sections = course_info['sections']
480 |         
481 |         self.available_sections_table.setRowCount(len(sections))
482 |         for row, section in enumerate(sections):
483 |             # Ø¥Ù†Ø´Ø§Ø¡ Ø²Ø± Ø§Ø®ØªÙŠØ§Ø± (Radio Button)
484 |             radio_button = QRadioButton()
485 |             radio_button.setProperty("section_id", section['id']) # ØªØ®Ø²ÙŠÙ† Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø¹Ø¨Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø²Ø±
486 |             
487 |             # ÙˆØ¶Ø¹ Ø§Ù„Ø²Ø± ÙÙŠ Ù…Ù†ØªØµÙ Ø§Ù„Ø®Ù„ÙŠØ©
488 |             cell_widget = QWidget()
489 |             cell_layout = QHBoxLayout(cell_widget)
490 |             cell_layout.addWidget(radio_button)
491 |             cell_layout.setAlignment(Qt.AlignmentFlag.AlignCenter)
492 |             self.available_sections_table.setCellWidget(row, 0, cell_widget)
493 |             self.section_button_group.addButton(radio_button) # Ø¥Ø¶Ø§ÙØªÙ‡ Ù„Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©
494 |             
495 |             # ØªØ¹Ø¨Ø¦Ø© Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
496 |             self.available_sections_table.setItem(row, 1, QTableWidgetItem(section['instructor']))
497 |             # ... (Ø§Ù„ÙˆÙ‚ØªØŒ Ø§Ù„Ù‚Ø§Ø¹Ø©ØŒ Ø§Ù„Ø³Ø¹Ø©) ...
498 |             
499 |             # Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù…ØªÙ„Ø§Ø¡ Ø§Ù„Ø´Ø¹Ø¨Ø©
500 |             if section['current_enrollment'] >= section['max_capacity']:
501 |                 radio_button.setEnabled(False) # ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø± (Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±)
502 | 
503 |     def add_section(self):
504 |         """Ø§Ù„Ù…Ù†Ø·Ù‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø´Ø¹Ø¨Ø© (Validation Core)"""
505 |         
506 |         # 1. Ù…Ø¹Ø±ÙØ© Ø£ÙŠ Ø²Ø± Ø±Ø§Ø¯ÙŠÙˆ ØªÙ… Ø§Ø®ØªÙŠØ§Ø±Ù‡
507 |         checked_button = self.section_button_group.checkedButton()
508 |         if not checked_button:
509 |             QMessageBox.warning(self, 'Ø®Ø·Ø£', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø´Ø¹Ø¨Ø© Ø£ÙˆÙ„Ø§Ù‹')
510 |             return
511 |         chosen_section_id = checked_button.property("section_id")
512 |         new_section_data = get_section_data(chosen_section_id)
513 | 
514 |         # 2. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ (Level Check)
515 |         if not is_course_allowed_for_level(course_code, student_level):
516 |             QMessageBox.critical(self, 'Ø®Ø·Ø£', 'Ø§Ù„Ù…Ø§Ø¯Ø© ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­Ø© Ù„Ù…Ø³ØªÙˆØ§Ùƒ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ')
517 |             return
518 | 
519 |         # 3. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© (Prerequisites)
520 |         if missing_prereqs:
521 |             QMessageBox.critical(self, 'Ø®Ø·Ø£', f'Ù„Ù… ØªØ¬ØªØ² Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª: {missing_prereqs}')
522 |             return
523 | 
524 |         # 4. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø³Ø¹Ø© (Capacity Check)
525 |         if new_section_data['current_enrollment'] >= new_section_data['max_capacity']:
526 |             QMessageBox.critical(self, 'Ø®Ø·Ø£', 'Ø§Ù„Ø´Ø¹Ø¨Ø© Ù…Ù…ØªÙ„Ø¦Ø©')
527 |             return
528 | 
529 |         # 5. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø³Ø§Ø¹Ø§Øª (Credit Limit)
530 |         if (current_registered_hours + course_credits) > CREDIT_LIMITS['max']:
531 |             QMessageBox.critical(self, 'Ø®Ø·Ø£', 'ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø³Ø§Ø¹Ø§Øª')
532 |             return
533 | 
534 |         # 6. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ¹Ø§Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª (Time Conflict)
535 |         for reg_section in self.registered_sections_data:
536 |             if (new_start < reg_end) and (new_end > reg_start): # Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„ØªÙ‚Ø§Ø·Ø¹ Ø§Ù„Ø²Ù…Ù†ÙŠ
537 |                 QMessageBox.critical(self, 'Ø®Ø·Ø£', 'ÙŠÙˆØ¬Ø¯ ØªØ¹Ø§Ø±Ø¶ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ù…Ø¹ Ù…Ø§Ø¯Ø© Ø£Ø®Ø±Ù‰')
538 |                 return 
539 | 
540 |         # 7. Ø§Ù„Ø­ÙØ¸ ÙˆØ¥ØªÙ…Ø§Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
541 |         success, error_reason = increment_section_enrollment(chosen_section_id) # ØªØ­Ø¯ÙŠØ« Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
542 |         if success:
543 |             USER_DB[self.user_id]['schedule'].append({'id': chosen_section_id}) # ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒØ§Ø´
544 |             self.load_schedule_and_courses() # ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø´Ø§Ø´Ø©
545 |             self.status_bar.showMessage(f"âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø§Ø¯Ø© Ø¨Ù†Ø¬Ø§Ø­", 4000)
546 | 
547 |     def remove_section(self):
548 |         """Ø­Ø°Ù Ø´Ø¹Ø¨Ø© Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„"""
549 |         # ... (Ù…Ù†Ø·Ù‚ Ù…Ø´Ø§Ø¨Ù‡ Ù„Ù„Ø¥Ø¶Ø§ÙØ© ÙˆÙ„ÙƒÙ† Ù„Ù„Ø­Ø°ÙØŒ Ù…Ø¹ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ Ù„Ù„Ø³Ø§Ø¹Ø§Øª) ...
550 |         success, error_reason = decrement_section_enrollment(section_id_to_remove)
551 |         # ...
552 | 
553 | # --- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¯Ù…Ù† ---
554 | class AdminDashboard(QWidget):
555 |     def __init__(self, user_id):
556 |         # ... (Ø¨Ù†Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª Tabs) ...
557 |         self.tab_widget = QTabWidget()
558 |         self.tab_widget.addTab(self.build_courses_tab(), "Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª") # ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯
559 |         self.tab_widget.addTab(self.build_sections_tab(), "Ø§Ù„Ø´Ø¹Ø¨") # ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø¹Ø¨
560 |         self.tab_widget.addTab(self.build_users_tab(), "Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†") # ØªØ¨ÙˆÙŠØ¨ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
561 | 
562 |     def handle_save_course(self):
563 |         """Ø­ÙØ¸ Ø£Ùˆ ØªØ¹Ø¯ÙŠÙ„ Ù…Ø§Ø¯Ø© ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"""
564 |         code = self.course_code_input.text()
565 |         # ... (Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„) ...
566 |         upsert_course(code, name, credits, lecture_hours, max_capacity, lab_hours) # Ø¯Ø§Ù„Ø© Ø§Ù„Ø­ÙØ¸
567 |         refresh_course_cache() # ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒØ§Ø´
568 |         self.load_courses() # ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙˆÙ„
569 | 
570 |     def handle_add_doctor(self):
571 |         """Ø¥Ø¶Ø§ÙØ© Ø¯ÙƒØªÙˆØ± Ø¬Ø¯ÙŠØ¯ (ÙŠØªØ·Ù„Ø¨ Ø±Ù…Ø² Ù…ÙˆØ¸ÙÙŠÙ†)"""
572 |         if prompt_staff_code(self, 'Ø±Ù…Ø² Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†', 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø²:'):
573 |             dialog = RegisterWindow(role='doctor', parent=self)
574 |             dialog.exec()
575 | 
576 | # --- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¯ÙƒØªÙˆØ± ---
577 | class DoctorDashboard(QWidget):
578 |     def __init__(self, user_id):
579 |         # ... (Ø¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ù…Ø¨Ø³Ø·Ø© Ù„Ù„Ø¯ÙƒØªÙˆØ±) ...
580 |         
581 |     def load_my_courses(self):
582 |         """Ø¬Ù„Ø¨ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªÙŠ ÙŠØ¯Ø±Ø³Ù‡Ø§ Ù‡Ø°Ø§ Ø§Ù„Ø¯ÙƒØªÙˆØ± ÙÙ‚Ø·"""
583 |         doctor_name = USER_DB[self.user_id]["name"]
584 |         my_courses = get_courses_by_instructor(doctor_name)
585 |         # ... (Ø¹Ø±Ø¶Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„) ...
586 | 
587 |     def handle_add_student_to_section(self):
588 |         """Ø§Ù„Ø³Ù…Ø§Ø­ Ù„Ù„Ø¯ÙƒØªÙˆØ± Ø¨Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨ ÙŠØ¯ÙˆÙŠØ§Ù‹ Ù„Ù„Ø´Ø¹Ø¨Ø© (Override)"""
589 |         # ... (Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© ÙˆØ¥Ø¶Ø§ÙØªÙ‡ Ù„Ù„Ù‚Ø§Ø¹Ø¯Ø©) ...
590 |         increment_section_enrollment(section_id)
591 | 
592 | # --- (7. Ù†Ù‚Ø·Ø© Ø§Ù†Ø·Ù„Ø§Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Main Execution) ---
593 | if __name__ == '__main__':
594 |     app = QApplication(sys.argv) # Ø¥Ù†Ø´Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚ ÙƒÙŠÙˆ ØªÙŠ
595 |     app.setStyleSheet(LIGHT_MODE_QSS) # ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
596 |     
597 |     while True: # Ø­Ù„Ù‚Ø© Ù„Ø§Ù†Ù‡Ø§Ø¦ÙŠØ© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬
598 |         login_window = LoginWindow()
599 |         result = login_window.exec() # ØªØ´ØºÙŠÙ„ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù†ØªÙŠØ¬Ø©
600 | 
601 |         if result == QDialog.DialogCode.Accepted: # Ø¥Ø°Ø§ ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­
602 |             current_user = login_window.current_user_id 
603 |             current_role = login_window.current_user_role
604 |             
605 |             # ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ø¯ÙˆØ±
606 |             if current_role == 'student':
607 |                 main_window = RegistrationApp(current_user)
608 |             elif current_role == 'admin':
609 |                 main_window = AdminDashboard(current_user)
610 |             elif current_role == 'doctor':
611 |                 main_window = DoctorDashboard(current_user)
612 |             
613 |             main_window.show() # Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
614 |             exit_code = app.exec() # ØªØ´ØºÙŠÙ„ Ø­Ù„Ù‚Ø© Ø§Ù„Ø£Ø­Ø¯Ø§Ø« (Event Loop)
615 |             
616 |             if exit_code != 100: # 100 Ù‡Ùˆ Ø±Ù…Ø² Ø§Ù„Ø®Ø±ÙˆØ¬ (Signout)ØŒ Ø£ÙŠ Ø´ÙŠØ¡ Ø¢Ø®Ø± ÙŠØ¹Ù†ÙŠ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
617 |                 break
618 |         else:
619 |             break # Ø¥Ø°Ø§ ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø£Ù†Ù‡Ù Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
620 |     
621 |     sys.exit(0)
